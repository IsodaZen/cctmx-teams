---
name: Tmux Check Worker Errors
description: This skill should be used when the user asks to "check worker errors", "detect errors", "monitor worker", "ワーカーのエラーを検知", "エラーチェック". Detects errors in worker pane output.
version: 1.0.0
---

# 実行指示

以下のBashスクリプトを実行してください：

```bash
bash ${CLAUDE_PLUGIN_ROOT}/skills/tmux-check/scripts/check-errors.sh
```

このスクリプトは、ワーカーペインの出力からエラーを検知し、エラーが見つかった場合は詳細を表示します。

---

# Tmux Check Worker Errors

このスキルは、ワーカーペインの出力からエラーを検知します。

## 概要

リーダーがワーカーの状態を監視し、エラーを早期に検知するために使用します。

## 使用タイミング

- ワーカーが応答しないとき
- 定期的なヘルスチェック時
- タスク実行中の監視として
- ワーカーが長時間作業している場合

## 動作

1. ワーカーペインの出力をキャプチャ
2. エラーパターンを検索
3. エラーが検出された場合、エラーメッセージを表示
4. エラーがない場合、正常メッセージを表示

## エラー検知パターン

以下のキーワードを含む出力をエラーとして検知します:

- `Error:`
- `エラー`
- `失敗`
- `Exception`
- `Fatal`
- その他のエラーパターン

## 前提条件

- `/tmux-worker` スキルでワーカーペインが作成されていること
- `.claude/worker-info` にワーカーペイン情報が保存されていること

## 使用方法

```
/tmux-check
```

スキルを実行すると、以下が自動的に行われます:

1. ワーカーペインの出力をキャプチャ（過去3000行）
2. エラーパターンを検索
3. 検出結果を表示

## リーダーの対応フロー

エラーが検出された場合:

1. **エラー内容を分析**
   - エラーメッセージの内容
   - 発生箇所（ファイル、行番号）
   - スタックトレース

2. **マネージャーに報告**
   - エラー詳細
   - 推定原因
   - 影響範囲

3. **修正方針を相談**
   - マネージャーと修正方針を議論
   - 必要に応じて要件を再確認

4. **ワーカーに再指示**
   - 修正内容を構造化指示フォーマットで送信（`/tmux-send` を使用）

## タイムアウト検知

ワーカーが長時間応答しない場合もエラーとみなします:

- **目安**: 5分以上応答がない場合
- **対応**:
  1. `/tmux-check` でエラー確認
  2. エラーがある場合は分析・報告
  3. エラーがない場合は待機
  4. 必要に応じてペインを再起動

## ワーカーペインの再起動方法

エラーが継続する場合や、ワーカーがフリーズした場合は再起動します:

```bash
# ワーカーペインを削除
tmux kill-pane -t ${CLAUDE_WORKER_SESSION}:${CLAUDE_WORKER_WINDOW}.${CLAUDE_WORKER_PANE}

# 新しいワーカーペインを作成
/tmux-worker
```

## 注意事項

- エラー検知は定期的に実施してください（5分に1回程度）
- エラーが検出された場合、必ずマネージャーに報告してください
- エラーの根本原因を分析してから、修正指示を出してください

## トラブルシューティング

### ワーカーペイン情報が見つからない

**原因**: `/tmux-worker` スキルを実行していない

**対処法**:
1. `/tmux-worker` スキルを実行
2. ワーカーペイン情報が `.claude/worker-info` に保存される
3. `/tmux-check` スキルを再実行

### エラーが検出されないのに、ワーカーが応答しない

**原因**:
- ワーカーがフリーズしている
- 長時間実行中のタスク
- ネットワーク遅延

**対処法**:
1. `/tmux-review` で出力を確認
2. 最後の出力が何分前か確認
3. 5分以上応答がない場合は再起動を検討

## 関連スキル

- `/tmux-worker`: ワーカーペインを作成
- `/tmux-review`: ワーカーの出力を確認し、成果物をレビュー
- `/tmux-send`: ワーカーに構造化指示を送信

## 詳細ドキュメント

詳細は `.claude/rules/cctmx-team.md` を参照してください。
