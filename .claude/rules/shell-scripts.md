---
paths:
  - "skills/*/scripts/*.sh"
  - "hooks/scripts/*.sh"
  - "tests/*.sh"
  - "**/*.sh"
---

# シェルスクリプト コードスタイルガイド

このプロジェクトのシェルスクリプトは、以下のスタイルガイドに従ってください。

## 基本ルール

- `#!/bin/bash` shebangを使用
- 厳格モードのため常に `set -euo pipefail` を使用
- すべての変数をクォート: `"${variable}"`
- 意味のある変数名を使用
- 複雑なロジックにはコメントを追加
- shellcheckの検証を警告なしで合格

## スクリプトテンプレート

```bash
#!/bin/bash
set -euo pipefail

# 関数の説明
function_name() {
  local variable="${1}"

  if [ -z "${variable:-}" ]; then
    echo "エラーメッセージ" >&2
    return 1
  fi

  # その他のロジック
}

# メイン処理
main() {
  # 処理内容
}

# スクリプトが直接実行された場合のみmainを実行
if [ "${BASH_SOURCE[0]}" = "${0}" ]; then
  main "$@"
fi
```

## 変数の扱い

- ローカル変数には `local` を使用
- 未定義変数のチェックには `${variable:-}` を使用
- 配列の展開には `"${array[@]}"` を使用

## エラーハンドリング

- エラーメッセージは標準エラー出力（`>&2`）に出力
- 適切な終了コードを返す（成功: 0、エラー: 1以上）
- `set -e` を使用しているため、エラー時は自動的に終了

## パス参照

- プラグイン内のファイルを参照する場合は `${CLAUDE_PLUGIN_ROOT}` を使用
- ポータビリティを保つため、絶対パスではなく相対パスを使用

## コメント

- 関数の前に簡潔な説明を追加
- 複雑なロジックには行コメントで説明を追加
- TODOやFIXMEには `# TODO: 説明` の形式を使用
